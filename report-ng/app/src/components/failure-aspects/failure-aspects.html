<template>

    <mdc-layout-grid>
        <mdc-layout-grid-inner>
            <mdc-layout-grid-cell span="4"></mdc-layout-grid-cell>
            <mdc-layout-grid-cell span="4">
                <!-- fullwidth breaks label -->
                <mdc-text-field label="Search"
                                outlined
                                value.bind="_searchQuery"
                                keydown.delegate="_filter() & debounce"
                                class="w100"
                >
                    <mdc-icon mdc-text-field-icon leading>search</mdc-icon>
                </mdc-text-field>
            </mdc-layout-grid-cell>
            <mdc-layout-grid-cell span="4"></mdc-layout-grid-cell>
            <mdc-layout-grid-cell span="12">
                <mdc-data-table class="w100">
                    <mdc-data-table-header>
                        <mdc-data-table-header-cell>Failure Aspect</mdc-data-table-header-cell>
                        <mdc-data-table-header-cell>Statuses</mdc-data-table-header-cell>
                    </mdc-data-table-header>
                    <mdc-data-table-content>
                        <mdc-data-table-row repeat.for="failureAspect of _filteredFailureAspects">
                            <mdc-data-table-cell class="p1" mdc-body1>
                                <a route-href="route: tests; params.bind: {q: failureAspect.name}"
                                   innerhtml.bind="failureAspect.name|html|highlightText:_searchRegexp"
                                ></a>
                            </mdc-data-table-cell>
                            <mdc-data-table-cell>
                                <div repeat.for="status of failureAspect.availableStatuses" class="m1">
                                    <a class="badge status-${status|statusClass}"
                                          route-href="route: tests; params.bind: {q: failureAspect.name, status: _statusConverter.getClassForStatus(status)}"
                                    >${failureAspect.getStatusCount(status)} ${status|statusName}</a>
                                </div>
                            </mdc-data-table-cell>
                        </mdc-data-table-row>
                    </mdc-data-table-content>
                </mdc-data-table>
            </mdc-layout-grid-cell>
        </mdc-layout-grid-inner>
    </mdc-layout-grid>
</template>
