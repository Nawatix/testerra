<template>
    <require from="components/image-card/image-card"></require>

    <mdc-layout-grid class="pt0">
        <mdc-layout-grid-inner>
            <mdc-layout-grid-cell span="12"
                                  repeat.for="testStep of _methodContext.testSteps"
            >
                <mdc-card>
                    <let step-index.bind="$index+1"></let>
                    <div mdc-subtitle2 class="card-headline"><span class="sr1">${stepIndex} ${testStep.name}</span></div>
                    <mdc-list-divider></mdc-list-divider>
                    <mdc-expandable repeat.for="testStepAction of testStep.testStepActions"
                                    class="card-expandable"
                    >
                        <div slot="caption"><span mdc-body1 class="sr1">${stepIndex}.${$index+1} ${testStepAction.name}</span><span class="secondary" mdc-body2>${testStepAction.timestamp|dateFormat:"ddd MMM D Y LTS Z"}</span></div>
                        <div class="code-view m0">
                            <pre class="m0"
                                 repeat.for="logMessage of testStepAction.logMessages"
                                 class.bind="(logMessage.type==1?'error':(logMessage.type==2?'warn':''))"
                            >${logMessage|logMessageFormat}</pre>
                        </div>
                        <mdc-list-divider></mdc-list-divider>
                        <div class="m0">
                            <div repeat.for="file of _getScreenshotsForTestStepAction(testStepAction)">
                                <image-card click.delegate="_showScreenshot(file)"
                                            src.bind="file.relativePath"
                                            title.bind="file.meta.Title"
                                ></image-card>
                            </div>
                        </div>
                    </mdc-expandable>
                </mdc-card>
            </mdc-layout-grid-cell>
        </mdc-layout-grid-inner>
    </mdc-layout-grid>
</template>
