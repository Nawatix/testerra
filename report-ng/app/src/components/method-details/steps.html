<!--
  ~ Testerra
  ~
  ~ (C) 2020, Mike Reiche, T-Systems Multimedia Solutions GmbH, Deutsche Telekom AG
  ~
  ~ Deutsche Telekom AG and all other contributors /
  ~ copyright owners license this file to you under the Apache
  ~ License, Version 2.0 (the "License"); you may not use this
  ~ file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
  -->

<template>
    <require from="./expandable-error-context.html"></require>
    <div class="container">
        <div id="timeline">
            <div class="timeline">
                <section class="step" repeat.for="testStep of _methodDetails.methodContext.testSteps">
                    <let step-index.bind="$index+1"></let>
                    <h3 mdc-headline5 id="step${stepIndex}">${stepIndex} ${testStep.name}</h3>
                    <div repeat.for="action of testStep.actions">
                        <section>
                            <ul>
                                <li mdc-body1>${stepIndex}.${$index+1} ${action.name}<br>
                                    <span class="secondary" mdc-body2>${action.timestamp|dateFormat}</span>
                                </li>
                                <div repeat.for="group of action.groups">
                                    <li mdc-body1 if.bind="group.assertions.length > 0">Assertions
                                        <expandable-error-context repeat.for="errorContext of group.assertions"
                                                                  error-context.bind="errorContext"
                                        ></expandable-error-context>
                                    </li>
                                    <li mdc-body1 if.bind="group.screenshots.length > 0">Screenshots
                                        <mdc-card
                                            repeat.for="screenshot of group.screenshots"
                                            class="thumbnail-fixed"
                                            outlined
                                        >
                                            <img src.bind="screenshot.relativePath"
                                                 class="thumbnail-fixed clickable"
                                                 click.delegate="_showScreenshot(screenshot)"
                                                 title="${screenshot.meta.Title}"/>
                                        </mdc-card>
                                    </li>
                                    <li mdc-body1 if.bind="group.logMessages.length > 0">Log messages
                                        <log-view log-messages.bind="group.logMessages"></log-view>
                                    </li>
                                </div>
                            </ul>
                        </section>
                    </div>
                </section>
            </div>
        </div>
    </div>
</template>
