import org.apache.tools.ant.filters.ReplaceTokens
import org.gradle.internal.jvm.Jvm

dependencies {
    // @see https://github.com/google/guice/issues/1256
    compile 'com.google.inject:guice:4.2.2:no_aop'
    compile 'com.google.inject.extensions:guice-assistedinject:4.2.2'
    compile 'commons-io:commons-io:2.6'
    compile 'org.apache.commons:commons-lang3:3.9'

    // <PdfUtils>
    implementation 'org.apache.pdfbox:pdfbox:1.8.10'
    // </PdfUtils>

    // <HttpClientUtils>
    implementation 'org.apache.httpcomponents:httpcore:4.4.13'
    implementation 'org.apache.httpcomponents:httpclient:4.5.12'
    // </HttpClientUtils>

    // <RESTUtils>
    implementation 'com.sun.jersey:jersey-client:1.19.3'
    // </RESTUtils

    implementation "com.google.guava:guava:${guavaVersion}"

    // <XML>
    // These dependencies are exposed by XMLUtils.java
    implementation 'org.apache.poi:poi-ooxml:3.17'
    compile 'org.jsoup:jsoup:1.7.2'
    compile 'org.jdom:jdom2:2.0.6'
    compile "javax.xml.bind:jaxb-api:2.3.0"
    compile "com.sun.xml.bind:jaxb-core:2.3.0"
    compile "com.sun.xml.bind:jaxb-impl:2.3.0"
    compile "javax.activation:activation:1.1"
    compile "xerces:xercesImpl:2.8.0"
    // </XML

    // <CSVTestDataReader>
    implementation 'com.opencsv:opencsv:3.9'
    // </CSVTestDataReader>

    // <ExceptionUtils>
    // Comes already implicit from reflections
    implementation 'org.javassist:javassist:3.20.0-GA'
    // </ExceptionUtils>

    compile('org.testng:testng:7.3.0') {
        // We have to exclude this here, because testng is using 25.1-android in dependency com.google.inject:guice:4.1.0
        // This will lead to a version clash with selenium and this will produce ImmutableMapErrors on WebDriverManager.getWebDriver
        exclude group: 'com.google.guava', module: 'guava'
    }

    // <TesterraLogger>
    compile 'org.apache.logging.log4j:log4j-slf4j18-impl:2.13.2'
    compile 'org.apache.logging.log4j:log4j-api:2.13.2'
    compile 'org.apache.logging.log4j:log4j-core:2.13.2'
    // </TesterraLogger>

    //implementation 'org.javassist:javassist:3.20.0-GA'

    // <FileUtils>
    implementation 'net.lingala.zip4j:zip4j:1.3.2'
    implementation 'de.idyl:winzipaes:1.0.1'
    // </FileUtils>

    // <IDUtils>
    implementation 'org.mongodb:bson:3.7.0'
    // </IDUtils>

    // <Booter>
    implementation 'org.reflections:reflections:0.9.12'
    // </Booter>
}

processResources {
    filesMatching('**/testerra-build.properties') {
        filter ReplaceTokens, tokens: [
                'build.java.version': Jvm.current().javaVersion.toString(),
                'build.os.name'     : System.getProperty("os.name"),
                'build.os.arch'     : System.getProperty("os.arch"),
                'build.os.version'  : System.getProperty("os.version"),
                'build.user.name'   : System.getProperty("user.name"),
                'build.version'     : project.version.toString(),
                'build.timestamp'   : new Date().toString()
        ]
    }
}

test {
    exclude '**'
}

apply from: rootProject.file('release-bintray.gradle')
