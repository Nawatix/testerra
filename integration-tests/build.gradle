doNotPublish(this)

dependencies {
    compile driver_ui_desktop
    compile test_utils
    compile 'org.xmlunit:xmlunit-core:2.5.0'
}

test {
    def s = [
            'src/test/resources/CoreTestSuite.xml',
            'src/test/resources/ReportingTestSuite.xml'
    ]

    def nr = findProperty("nr")
    if (nr) {
        setReportDir("report-testsundertest-0" + nr)
        s = ['src/test/resources/testng/ReportTestsUnderTest' + nr + '.xml']
    }

    useTestNG() {
        suites s
    }
    options {
        systemProperties(System.getProperties())
    }
}

def setReportDir(reportname) {
    def reportdir = "reportname"
    def modulename = "integration-tests"
    if (!projectDir.toString().contains(modulename)) {
        reportdir = modulename + "/" + reportname
    }
    System.setProperty("fennec.reportdir", reportdir)
}